<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Operations on keys — key_get • keyring</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Operations on keys — key_get"><meta name="description" content="These functions manipulate keys in a keyring. You can think of a keyring
as a secure key-value store."><meta property="og:description" content="These functions manipulate keys in a keyring. You can think of a keyring
as a secure key-value store."><meta name="robots" content="noindex"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">keyring</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/keyring/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Operations on keys</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/keyring/blob/main/R/api.R" class="external-link"><code>R/api.R</code></a></small>
      <div class="d-none name"><code>key_get.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions manipulate keys in a keyring. You can think of a keyring
as a secure key-value store.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">key_get</span><span class="op">(</span><span class="va">service</span>, username <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_get_raw</span><span class="op">(</span><span class="va">service</span>, username <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_set</span><span class="op">(</span><span class="va">service</span>, username <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span>, prompt <span class="op">=</span> <span class="st">"Password: "</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_set_with_value</span><span class="op">(</span><span class="va">service</span>, username <span class="op">=</span> <span class="cn">NULL</span>, password <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_set_with_raw_value</span><span class="op">(</span></span>
<span>  <span class="va">service</span>,</span>
<span>  username <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  password <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keyring <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_delete</span><span class="op">(</span><span class="va">service</span>, username <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_list</span><span class="op">(</span>service <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">key_list_raw</span><span class="op">(</span>service <span class="op">=</span> <span class="cn">NULL</span>, keyring <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-service">service<a class="anchor" aria-label="anchor" href="#arg-service"></a></dt>
<dd><p>Service name, a character scalar.</p></dd>


<dt id="arg-username">username<a class="anchor" aria-label="anchor" href="#arg-username"></a></dt>
<dd><p>Username, a character scalar, or <code>NULL</code> if the key
is not associated with a username.</p></dd>


<dt id="arg-keyring">keyring<a class="anchor" aria-label="anchor" href="#arg-keyring"></a></dt>
<dd><p>For systems that support multiple keyrings, specify
the name of the keyring to use here. If <code>NULL</code>, then the default
keyring is used. See also <code><a href="has_keyring_support.html">has_keyring_support()</a></code>.</p></dd>


<dt id="arg-prompt">prompt<a class="anchor" aria-label="anchor" href="#arg-prompt"></a></dt>
<dd><p>The character string displayed when requesting the secret</p></dd>


<dt id="arg-password">password<a class="anchor" aria-label="anchor" href="#arg-password"></a></dt>
<dd><p>The secret to store. For <code>key_set</code>, it is read from
the console, interactively. <code>key_set_with_value</code> can be also used
in non-interactive mode.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>key_get</code> returns a character scalar, the password or other
confidential information that was stored in the key.</p>
<p><code>key_list</code> returns a list of keys, i.e. service names and usernames,
in a data frame with column names <code>service</code> and <code>username</code>. If a
service or user name contains a zero byte, which is not allowed in an
R string, that entry is shown as <code>NA</code> and a warning (of class
<code>keyring_warn_zero_byte_keys</code>) is thrown.  You can use the
<code>key_list_raw()</code> function to query these keys.</p>
<p><code>key_list_raw</code> is similar to <code>key_list</code> but returns service and
usernames as raw vectors. This is useful if some service or user
names) contain zero bytes. All column names: <code>service</code>, <code>username</code>,
<code>service_raw</code>, <code>username_raw</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>key_get</code> queries a key from the keyring.</p>
<p><code>key_get_raw</code> queries a key and returns it as a raw vector.
Most credential stores allow storing a byte sequence with embedded null
bytes, and these cannot be represented as traditional null bytes
terminated strings. If you don't know whether the key contains an
embedded null, it is best to query it with <code>key_get_raw</code> instead of
<code>key_get</code>.</p>
<p><code>key_set</code> sets a key in the keyring. The contents of the key is read
interactively from the terminal.</p>
<p><code>key_set_with_value</code> is the non-interactive pair of <code>key_set</code>, to set
a key in the keyring.</p>
<p><code>key_set_raw_with_value</code> sets a key to a byte sequence from a raw
vector.</p>
<p><code>key_delete</code> deletes a key.</p>
<p><code>key_list</code> lists all keys of a keyring, or the keys for a certain
service (if <code>service</code> is not <code>NULL</code>).</p>
<p><code>key_list_raw()</code> is like <code>key_list()</code> but also returns the keys as raw
values. This is useful if your keys have bytes that cannot appear
in R strings, e.g. a zero byte.</p><div class="section">
<h3 id="encodings">Encodings<a class="anchor" aria-label="anchor" href="#encodings"></a></h3>


<p>On Windows, if required, an encoding can be specified using either
an R option (<code>keyring.encoding_windows</code>) or environment variable
(<code>KEYRING_ENCODING_WINDOWS</code>). This will be applied when both
getting and setting keys. The option takes precedence over the
environment variable, if both are set.</p>
<p>This is reserved primarily for compatibility with keys set with
other software, such as Python's implementation of keyring. For a
list of encodings, use <code><a href="https://rdrr.io/r/base/iconv.html" class="external-link">iconvlist()</a></code>, although it should be noted
that not <em>every</em> encoding can be properly converted, even for
trivial cases. For best results, use UTF-8 if you can.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># These examples use the default keyring, and they are interactive,</span></span></span>
<span class="r-in"><span><span class="co"># so, we don't run them by default</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">key_set</span><span class="op">(</span><span class="st">"R-keyring-test-service"</span>, <span class="st">"donaldduck"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">key_get</span><span class="op">(</span><span class="st">"R-keyring-test-service"</span>, <span class="st">"donaldduck"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="has_keyring_support.html">has_keyring_support</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fu">key_list</span><span class="op">(</span>service <span class="op">=</span> <span class="st">"R-keyring-test-service"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">key_delete</span><span class="op">(</span><span class="st">"R-keyring-test-service"</span>, <span class="st">"donaldduck"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## This is non-interactive, assuming that that default keyring</span></span></span>
<span class="r-in"><span><span class="co">## is unlocked</span></span></span>
<span class="r-in"><span><span class="fu">key_set_with_value</span><span class="op">(</span><span class="st">"R-keyring-test-service"</span>, <span class="st">"donaldduck"</span>,</span></span>
<span class="r-in"><span>                   password <span class="op">=</span> <span class="st">"secret"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">key_get</span><span class="op">(</span><span class="st">"R-keyring-test-service"</span>, <span class="st">"donaldduck"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="has_keyring_support.html">has_keyring_support</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fu">key_list</span><span class="op">(</span>service <span class="op">=</span> <span class="st">"R-keyring-test-service"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">key_delete</span><span class="op">(</span><span class="st">"R-keyring-test-service"</span>, <span class="st">"donaldduck"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## This is interactive using backend_file</span></span></span>
<span class="r-in"><span><span class="co">## Set variables to be used in keyring</span></span></span>
<span class="r-in"><span><span class="va">kr_name</span> <span class="op">&lt;-</span> <span class="st">"my_keyring"</span></span></span>
<span class="r-in"><span><span class="va">kr_service</span> <span class="op">&lt;-</span> <span class="st">"my_database"</span></span></span>
<span class="r-in"><span><span class="va">kr_username</span> <span class="op">&lt;-</span> <span class="st">"my_username"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a keyring and add an entry using the variables above</span></span></span>
<span class="r-in"><span><span class="va">kb</span> <span class="op">&lt;-</span> <span class="fu">keyring</span><span class="fu">::</span><span class="va"><a href="backend_file.html">backend_file</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Prompt for the keyring password, used to unlock keyring</span></span></span>
<span class="r-in"><span><span class="va">kb</span><span class="op">$</span><span class="fu">keyring_create</span><span class="op">(</span><span class="va">kr_name</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Prompt for the secret/password to be stored in the keyring</span></span></span>
<span class="r-in"><span><span class="va">kb</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="va">kr_service</span>, username<span class="op">=</span><span class="va">kr_username</span>, keyring<span class="op">=</span><span class="va">kr_name</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Lock the keyring</span></span></span>
<span class="r-in"><span><span class="va">kb</span><span class="op">$</span><span class="fu">keyring_lock</span><span class="op">(</span><span class="va">kr_name</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The keyring file is stored at ~/.config/r-keyring/ on Linux</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Output the stored password</span></span></span>
<span class="r-in"><span><span class="fu">keyring</span><span class="fu">::</span><span class="va"><a href="backend_file.html">backend_file</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>service <span class="op">=</span> <span class="va">kr_service</span>,</span></span>
<span class="r-in"><span>  user <span class="op">=</span> <span class="va">kr_username</span>,</span></span>
<span class="r-in"><span>  keyring <span class="op">=</span> <span class="va">kr_name</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

